#!/usr/bin/env -S cargo run -- interpret
.registers {
    B, A ‚Üê 3x3 builtin (24, 210)
}

.start-rhai
    fn get(reg) {
        return reg.order - 1;
    }
end-rhai

.define MOD 13

.define SUBA rhai get(A)
.define SUBB rhai get(B)

input "Number to modulus:" A

loop:

print "A is now" A
add B $MOD

while not-solved A {
    solved-goto B loop
    add A $SUBA
    add B $SUBB
}

while not-solved B {
    add A $SUBA
    add B $SUBB
}

add A $MOD

halt "The modulus is" A
